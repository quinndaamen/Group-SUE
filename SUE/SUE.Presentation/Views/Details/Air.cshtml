@{
    ViewData["Title"] = "Air Purifier Control";
}
<style>
    .dashboard {
        padding: 20px;
        background-color: #f8f9fa;
        min-height: 100vh;
    }
    
    .dashboard h1 {
        font-size: 24px;
        font-weight: bold;
        color: #0A0A0A;
        margin-bottom: 5px;
    }
    
    .subtitle {
        color: #717182;
        font-size: 16px;
        margin-bottom: 30px;
    }
    
    .card {
        background: white;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        margin-bottom: 20px;
    }
    
    .metric-label {
        color: #717182;
        font-size: 14px;
        margin-bottom: 5px;
    }
    
    .metric-value {
        font-size: 24px;
        font-weight: bold;
        color: #0A0A0A;
        margin: 5px 0;
    }
    
    .metric-value-large {
        font-size: 64px;
        font-weight: bold;
        margin: 10px 0;
    }
    
    .status-good {
        color: #00C950;
        font-weight: 500;
    }
    
    .status-running {
        color: #00C950;
        font-weight: 500;
    }
    
    /* Header */
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
    }
    
    .header-buttons {
        display: flex;
        gap: 10px;
    }
    
    .nav-button {
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 8px;
        padding: 8px 16px;
        color: #0A0A0A;
        text-decoration: none;
        font-size: 14px;
        transition: all 0.2s;
        cursor: pointer;
    }
    
    .nav-button:hover {
        background: #f8f9fa;
        border-color: #d1d5db;
    }
    
    /* AQI Circle */
    .aqi-circle {
        position: relative;
        width: 200px;
        height: 200px;
        background-color: #f9fafb;
        border-radius: 50%;
        margin: 0 auto 30px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    
    .aqi-circle-value {
        font-size: 64px;
        font-weight: bold;
        color: #0A0A0A;
        line-height: 1;
    }
    
    .aqi-circle-label {
        color: #717182;
        font-size: 14px;
        margin-top: 5px;
    }
    
    .aqi-circle-status {
        color: #00C950;
        font-size: 14px;
        font-weight: 500;
        margin-top: 5px;
    }
    
    /* Control Section */
    .control-section {
        background: #f0f7ff;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .control-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .toggle-switch {
        position: relative;
        width: 52px;
        height: 28px;
    }
    
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    
    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #155DFC;
        border-radius: 34px;
        transition: .4s;
    }
    
    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        border-radius: 50%;
        transition: .4s;
    }
    
    input:checked + .toggle-slider:before {
        transform: translateX(24px);
    }
    
    /* Mode Buttons */
    .mode-buttons {
        display: flex;
        gap: 12px;
        margin-top: 10px;
    }
    
    .mode-button {
        flex: 1;
        padding: 12px;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        background: white;
        color: #0A0A0A;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .mode-button:hover {
        background: #f8f9fa;
    }
    
    .mode-button.active {
        background: #155DFC;
        color: white;
        border-color: #155DFC;
    }
    
    /* Slider */
    .slider-container {
        margin-top: 15px;
    }
    
    .slider-labels {
        display: flex;
        justify-content: space-between;
        margin-top: 8px;
    }
    
    .slider-label {
        color: #717182;
        font-size: 12px;
    }
    
    /* Range Slider */
    .range-slider {
        width: 100%;
        height: 8px;
        -webkit-appearance: none;
        appearance: none;
        background: linear-gradient(to right, #155DFC 25%, #e0e0e0 25%);
        border-radius: 4px;
        outline: none;
    }
    
    .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #155DFC;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .range-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #155DFC;
        border-radius: 50%;
        cursor: pointer;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    /* Quick Actions */
    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 15px;
    }
    
    .action-button {
        background: #f9fafb;
        border: 1px solid #e5e7eb;
        border-radius: 10px;
        padding: 20px;
        text-align: left;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .action-button:hover {
        background: #f0f7ff;
        border-color: #155DFC;
    }
    
    .action-title {
        color: #0A0A0A;
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 4px;
    }
    
    .action-subtitle {
        color: #717182;
        font-size: 12px;
    }
    
    /* Stats Grid */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .stat-card {
        background: white;
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    .stat-value {
        font-size: 32px;
        font-weight: bold;
        color: #0A0A0A;
        display: flex;
        align-items: baseline;
        gap: 5px;
    }
    
    .stat-unit {
        font-size: 14px;
        color: #717182;
        font-weight: normal;
    }
</style>

<div class="dashboard">
    <!-- Header -->
    <div class="page-header">
        <div>
            <h1>S.U.E - Air Quality Control</h1>
            <p class="subtitle">Manage your home air quality system</p>
        </div>
        <div class="header-buttons">
            <a href="/" class="nav-button">Home</a>
            <a href="/AirQuality/Graph" class="nav-button">Graphs</a>
            <button class="nav-button">Logout</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="card">
        <h2>Air Purifier Control</h2>
        
        <!-- AQI Circle -->
        <div class="aqi-circle">
            <div class="aqi-circle-value">42</div>
            <div class="aqi-circle-label">AQI</div>
            <div class="aqi-circle-status">GOOD</div>
        </div>
        
        <!-- Air Purifier Status -->
        <div class="control-section">
            <div class="control-row">
                <div>
                    <div class="metric-label">Air Purifier</div>
                    <div class="status-running">Running</div>
                </div>
                <label class="toggle-switch">
                    <input type="checkbox" checked>
                    <span class="toggle-slider"></span>
                </label>
            </div>
        </div>
        
        <!-- Operation Mode -->
        <div class="metric-label">Operation Mode</div>
        <div class="mode-buttons">
            <button class="mode-button active" id="autoMode">Auto</button>
            <button class="mode-button" id="manualMode">Manual</button>
            <button class="mode-button" id="sleepMode">Sleep</button>
        </div>
        
        <!-- Fan Speed -->
        <div class="slider-container">
            <div class="control-row">
                <div>
                    <div class="metric-label">Fan Speed</div>
                    <div class="metric-value" id="fanSpeedValue">Level 2</div>
                </div>
            </div>
            <input type="range" min="1" max="5" value="2" class="range-slider" id="fanSpeedSlider">
            <div class="slider-labels">
                <span class="slider-label">1</span>
                <span class="slider-label">2</span>
                <span class="slider-label">3</span>
                <span class="slider-label">4</span>
                <span class="slider-label">5</span>
            </div>
        </div>
    </div>
    
    <!-- Air Quality Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="metric-label">PM2.5</div>
            <div class="stat-value">12 <span class="stat-unit">µg/m³</span></div>
        </div>
        
        <div class="stat-card">
            <div class="metric-label">Humidity</div>
            <div class="stat-value">55 <span class="stat-unit">%</span></div>
        </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="card">
        <div class="metric-label">Quick Actions</div>
        <div class="quick-actions">
            <button class="action-button" id="resetFilter">
                <div class="action-title">Reset Filter</div>
                <div class="action-subtitle">3 days left</div>
            </button>
            
            <button class="action-button" id="scheduleTimer">
                <div class="action-title">Schedule</div>
                <div class="action-subtitle">Set timer</div>
            </button>
        </div>
    </div>
</div>

<script>
    // Mode Selection
    const modeButtons = document.querySelectorAll('.mode-button');
    modeButtons.forEach(button => {
        button.addEventListener('click', function() {
            modeButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            // Update UI based on mode
            const mode = this.textContent;
            const fanSlider = document.getElementById('fanSpeedSlider');
            
            if (mode === 'Auto') {
                fanSlider.disabled = true;
                document.getElementById('fanSpeedValue').textContent = 'Auto';
                fanSlider.value = 2; // Reset to default for auto mode
            } else if (mode === 'Sleep') {
                fanSlider.disabled = true;
                document.getElementById('fanSpeedValue').textContent = 'Sleep';
                fanSlider.value = 1; // Minimum for sleep mode
            } else {
                fanSlider.disabled = false;
                updateFanSpeed();
            }
        });
    });
    
    // Fan Speed Slider
    const fanSlider = document.getElementById('fanSpeedSlider');
    fanSlider.addEventListener('input', updateFanSpeed);
    
    function updateFanSpeed() {
        const value = fanSlider.value;
        document.getElementById('fanSpeedValue').textContent = `Level ${value}`;
        
        // Update slider gradient
        const percentage = (value / 5) * 100;
        fanSlider.style.background = `linear-gradient(to right, #155DFC ${percentage}%, #e0e0e0 ${percentage}%)`;
    }
    
    // Initialize slider gradient
    updateFanSpeed();
    
    // Toggle Switch
    const toggleSwitch = document.querySelector('.toggle-switch input');
    toggleSwitch.addEventListener('change', function() {
        const statusText = this.checked ? 'Running' : 'Stopped';
        const statusColor = this.checked ? '#00C950' : '#717182';
        
        document.querySelector('.status-running').textContent = statusText;
        document.querySelector('.status-running').style.color = statusColor;
        
        // Disable controls if purifier is off
        const controls = [fanSlider, ...modeButtons];
        controls.forEach(control => {
            if (!this.checked) {
                control.disabled = true;
                if (control.classList) {
                    control.classList.add('disabled');
                }
            } else {
                control.disabled = false;
                if (control.classList) {
                    control.classList.remove('disabled');
                }
            }
        });
    });
    
    // Quick Actions
    document.getElementById('resetFilter').addEventListener('click', function() {
        alert('Filter reset scheduled. Filter life will be reset to 30 days.');
        this.querySelector('.action-subtitle').textContent = '30 days left';
    });
    
    document.getElementById('scheduleTimer').addEventListener('click', function() {
        const time = prompt('Enter schedule time (e.g., 22:00 for 10 PM):');
        if (time) {
            this.querySelector('.action-subtitle').textContent = `Scheduled for ${time}`;
            alert(`Air purifier scheduled to run at ${time}`);
        }
    });
    
    // Real-time AQI update simulation
    function updateAQI() {
        const aqiValue = Math.floor(Math.random() * 20) + 35; // Random AQI between 35-55
        const aqiElement = document.querySelector('.aqi-circle-value');
        const statusElement = document.querySelector('.aqi-circle-status');
        
        aqiElement.textContent = aqiValue;
        
        // Update AQI status and color
        if (aqiValue <= 50) {
            statusElement.textContent = 'GOOD';
            statusElement.style.color = '#00C950';
        } else if (aqiValue <= 100) {
            statusElement.textContent = 'MODERATE';
            statusElement.style.color = '#FFD700';
        } else {
            statusElement.textContent = 'UNHEALTHY';
            statusElement.style.color = '#FF4500';
        }
        
        // Update PM2.5 value (rough correlation with AQI)
        const pm25 = Math.round((aqiValue / 2) + 5);
        document.querySelector('.stat-card:nth-child(1) .stat-value').innerHTML = `${pm25} <span class="stat-unit">µg/m³</span>`;
    }
    
    // Update AQI every 30 seconds
    setInterval(updateAQI, 30000);
</script>